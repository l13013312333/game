<!DOCTYPE html>
<html>

<head>
  <title>KUI</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="./main.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js"></script>
  <script src="https://unpkg.com/http-vue-loader"></script>
  <!-- 引入样式 -->
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
  <!-- 引入组件库 -->
  <script src="https://unpkg.com/element-ui/lib/index.js"></script>
</head>

<body>
  <div id="app">
    <Kmenu :activiy-name="activiyName" :menu-config="MenuConfig" @changeVal="changeActivityName">
      <div v-for="menu in MenuConfig" v-bind:key="menu.index">
        {{ menu }}
        <keep-alive>
          <component v-bind:is="currentTabComponent"></component>
        </keep-alive>
      </div>
    </Kmenu>
  </div>
</body>

<script type="module">

  import MenuConfig from './assets/menuConfig.js';
  var app = new Vue({
    el: '#app',
    data: function () {
      return {
        activiyName: 'index',
        MenuConfig: MenuConfig
      }
    },
    components: {
      'Kmenu': httpVueLoader('./components/menu.vue')
    },
    methods: {
      changeActivityName(val) {
        this.activiyName = val;
      }
    },
    computed: {
      currentTabComponent: function (x) {
        return  httpVueLoader('./pages/' + x + '.vue');
      }
    },
    mounted() {
      // $(function () {
      //   $.get('https://script.google.com/macros/s/AKfycbww2VMeMXxRyvY-ZLptjURvm9COodyVHScaZB-x23MWFaOF_GA/exec', function (e) {
      //     console.log(e);
      //   });
      // });
    }
  });
  
</script>

</html>